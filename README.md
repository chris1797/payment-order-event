# Payment-Order-Event
실시간 주문·결제 이벤트 스트림 구현, 각 서비스는 비동기 이벤트 기반, 동기 호출 최소화

API Gateway → 주문 서비스 → 결제 서비스 → 재고 서비스 → 알림/분석 서비스 <p>

<br/>

### 주문 서비스
- 주문 서비스는 DB 에 주문 생성 + Kafka로 OrderCreated 이벤트 전송하는 작업
- DB 트랜잭션과 kafka 전송은 서로 다른 시스템에서 일어나므로 동시에 성공하거나 실패한다는 보장이 없기 때문에 Outbox 패턴 사용



---
## 모놀리식 아키텍처

하나의 애플리케이션에 모든 기능이 포함된 구조. \
사용자 - 주문 - 결제 - 알림 등 각각의 로직이 하나의 코드베이스에 존재하며 각 기능이 서로 결합될 수 밖에 없다. \
각자의 책임을 분리하고 각 도메인의 메세지에 집중하여 설계할 필요성이 있음.

### 도메인
  - 사용자
  - 주문
  - 결제 정보
  - 알림

### 프로세스
1. 사용자가 주문을 생성
   1. 사용자 id, 사용자 주소를 넘겨줌
2. 주문 서비스가 사용자로부터 주문을 받아 DB에 저장 (+ 유효성 처리)
3. 주문 서비스가 결제 서비스에 결제 요청
4. 결제 서비스가 결제를 처리하고 DB에 저장 (+ 유효성 처리)
5. 결제 서비스가 주문 서비스에 결제 완료 알림
6. 주문 서비스가 알림 서비스에 주문 완료 알림